# ğŸ—ºï¸ Feature Integration Architecture Diagram

## Complete Visual Map of Questions, Submissions, and Activity Tracking

---

## 1. QUIZ & QUESTIONS ARCHITECTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    QUIZ SYSTEM INTEGRATION                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API ENDPOINTS                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  1. GET /api/courses/:courseId/quizzes                              â”‚
â”‚     â””â”€ quiz.controller.js â†’ getQuizzes()                            â”‚
â”‚        â””â”€ SELECT Quiz + COUNT(Question)                             â”‚
â”‚           â””â”€ Returns: Quiz list with question counts                â”‚
â”‚                                                                      â”‚
â”‚  2. GET /api/courses/:courseId/quizzes/:quizId                      â”‚
â”‚     â””â”€ quiz.controller.js â†’ getQuizById()                           â”‚
â”‚        â””â”€ SELECT Quiz + SELECT Question WHERE QuizID = ?            â”‚
â”‚           â””â”€ Returns: Quiz with ALL questions/options               â”‚
â”‚                                                                      â”‚
â”‚  3. POST /api/courses/:courseId/quizzes/:quizId/submit              â”‚
â”‚     â””â”€ quiz.controller.js â†’ submitQuizAttempt()                     â”‚
â”‚        â”œâ”€ SELECT Question (to get correct answers)                  â”‚
â”‚        â”œâ”€ LOGIC: Score += Q.Marks IF answer === Q.CorrectOption    â”‚
â”‚        â””â”€ INSERT QuizAttempt (Score)                                â”‚
â”‚           â””â”€ Returns: { AttemptID, Score }                          â”‚
â”‚                                                                      â”‚
â”‚  4. GET /api/courses/:courseId/quizzes/:quizId/attempts             â”‚
â”‚     â””â”€ quiz.controller.js â†’ getStudentQuizAttempts()                â”‚
â”‚        â””â”€ SELECT QuizAttempt                                        â”‚
â”‚           â””â”€ Returns: Student's quiz attempt history                â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATABASE RELATIONSHIPS                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚        â”‚  Quiz          â”‚                                            â”‚
â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                            â”‚
â”‚        â”‚ QuizID (PK)    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚        â”‚ CourseID (FK)  â”‚        â”‚                                   â”‚
â”‚        â”‚ Title          â”‚        â”‚                                   â”‚
â”‚        â”‚ TotalMarks     â”‚        â”‚                                   â”‚
â”‚        â”‚ TimeLimit      â”‚        â”‚ 1:N                               â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ Relationship                      â”‚
â”‚                                  â”‚                                   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                    â”‚                         â”‚                       â”‚
â”‚                    â–¼                         â–¼                       â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚        â”‚  Question          â”‚   â”‚  QuizAttempt        â”‚             â”‚
â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚        â”‚ QuestionID (PK)    â”‚   â”‚ AttemptID (PK)      â”‚             â”‚
â”‚        â”‚ QuestionText       â”‚   â”‚ QuizID (FK)         â”‚             â”‚
â”‚        â”‚ OptionA/B/C/D      â”‚   â”‚ StudentID (FK)      â”‚             â”‚
â”‚        â”‚ CorrectOption      â”‚   â”‚ Score               â”‚             â”‚
â”‚        â”‚ Marks              â”‚   â”‚ SubmittedAt         â”‚             â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                      â”‚
â”‚  â€¢ Question stores quiz questions with correct answers              â”‚
â”‚  â€¢ QuizAttempt stores student attempts with auto-calculated score   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CODE EXECUTION FLOW                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Student Submits Quiz Answer                                        â”‚
â”‚  â””â”€ POST /quizzes/:id/submit { answers: {...} }                     â”‚
â”‚     â”‚                                                               â”‚
â”‚     â”œâ”€ quiz.controller.js submitQuizAttempt() [Line 130]            â”‚
â”‚     â”‚  â””â”€ await pool.query("SELECT * FROM Question WHERE...")      â”‚
â”‚     â”‚     (Fetches ALL questions with correct answers)              â”‚
â”‚     â”‚     Result: Question[] = [{                                   â”‚
â”‚     â”‚       QuestionID: 1,                                          â”‚
â”‚     â”‚       QuestionText: "What is 2+2?",                           â”‚
â”‚     â”‚       OptionA: "3", OptionB: "4", ...                         â”‚
â”‚     â”‚       CorrectOption: "B",                                     â”‚
â”‚     â”‚       Marks: 2                                                â”‚
â”‚     â”‚     }, ...]                                                   â”‚
â”‚     â”‚                                                               â”‚
â”‚     â”œâ”€ Loop through questions [Line 138]                            â”‚
â”‚     â”‚  â””â”€ if (answers[questionId] === question.CorrectOption)       â”‚
â”‚     â”‚      score += question.Marks                                  â”‚
â”‚     â”‚     Example:                                                  â”‚
â”‚     â”‚     - Q1: Student answered "B" âœ“ Score += 2                   â”‚
â”‚     â”‚     - Q2: Student answered "A" âœ— Score += 0                   â”‚
â”‚     â”‚     - Final Score: 2/4                                        â”‚
â”‚     â”‚                                                               â”‚
â”‚     â””â”€ INSERT QuizAttempt (QuizID, StudentID, Score)                â”‚
â”‚        â””â”€ Return: { AttemptID, Score: 2 }                           â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ASSIGNMENT SUBMISSION ARCHITECTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ASSIGNMENT SUBMISSION SYSTEM                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API ENDPOINTS                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  1. GET /api/courses/:courseId/assignments                           â”‚
â”‚     â””â”€ assignments.controller.js â†’ getAssignments()                  â”‚
â”‚        â”œâ”€ SELECT Assignment                                          â”‚
â”‚        â”œâ”€ COUNT(AssignmentSubmission) for each                       â”‚
â”‚        â””â”€ Returns: Assignment[] with SubmissionCount                 â”‚
â”‚                                                                      â”‚
â”‚  2. POST /api/courses/:courseId/assignments/:assignmentId/submit     â”‚
â”‚     â””â”€ assignments.controller.js â†’ submitAssignment()                â”‚
â”‚        â”œâ”€ CHECK: SELECT FROM AssignmentSubmission (exists?)          â”‚
â”‚        â”œâ”€ IF EXISTS: UPDATE FileURL                                  â”‚
â”‚        â”œâ”€ IF NOT: INSERT INTO AssignmentSubmission                   â”‚
â”‚        â””â”€ Returns: { SubmissionID }                                  â”‚
â”‚                                                                      â”‚
â”‚  3. GET /api/courses/:courseId/assignments/:assignmentId/submissions â”‚
â”‚     â””â”€ assignments.controller.js â†’ getSubmissions()                  â”‚
â”‚        â”œâ”€ SELECT AssignmentSubmission                                â”‚
â”‚        â”œâ”€ JOIN Student (to show names)                               â”‚
â”‚        â””â”€ Returns: Submission[] with student info                    â”‚
â”‚                                                                      â”‚
â”‚  4. GET /api/...submissions/:submissionId                            â”‚
â”‚     â””â”€ assignments.controller.js â†’ getSubmissionById()               â”‚
â”‚        â””â”€ Returns: Single submission details                         â”‚
â”‚                                                                      â”‚
â”‚  5. PUT /api/.../submissions/:submissionId/grade                     â”‚
â”‚     â””â”€ assignments.controller.js â†’ gradeSubmission()                 â”‚
â”‚        â”œâ”€ INPUT: { MarksObtained, Feedback }                         â”‚
â”‚        â”œâ”€ UPDATE AssignmentSubmission                                â”‚
â”‚        â””â”€ Returns: { message: "Graded" }                             â”‚
â”‚                                                                      â”‚
â”‚  6. GET /api/courses/:courseId/assignments/:assignmentId/stats       â”‚
â”‚     â””â”€ assignments.controller.js â†’ getAssignmentStats()              â”‚
â”‚        â”œâ”€ AGGREGATE: AVG, MAX, MIN, COUNT                            â”‚
â”‚        â””â”€ Returns: { AverageMarks, HighestMarks, ... }               â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATABASE RELATIONSHIPS                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Assignment          â”‚         â”‚  Student            â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚ AssignmentID (PK)    â”‚         â”‚ StudentID (PK)      â”‚           â”‚
â”‚  â”‚ CourseID (FK)        â”‚         â”‚ FullName            â”‚           â”‚
â”‚  â”‚ Title                â”‚         â”‚ Email               â”‚           â”‚
â”‚  â”‚ Description          â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”‚ DueDate              â”‚                   â–²                        â”‚
â”‚  â”‚ MaxMarks             â”‚                   â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚ FK                     â”‚
â”‚         â–²                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚ FK                 â”‚                          â”‚            â”‚
â”‚         â”‚                    â–¼                          â–¼            â”‚
â”‚         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚         â”‚         â”‚ AssignmentSubmission   â”‚  â”‚ (Other tables)  â”‚   â”‚
â”‚         â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ SubmissionID (PK)      â”‚                        â”‚
â”‚                   â”‚ AssignmentID (FK)  â”€â”€â”€â”€â”˜                        â”‚
â”‚                   â”‚ StudentID (FK)     â”€â”€â”€â”€â”                        â”‚
â”‚                   â”‚ FileURL            (Student uploads file)       â”‚
â”‚                   â”‚ SubmittedAt            â”‚ (auto timestamp)       â”‚
â”‚                   â”‚ MarksObtained      (Teacher grades: NULLâ†’10)    â”‚
â”‚                   â”‚ Feedback           (Teacher provides feedback)  â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                      â”‚
â”‚  Key Features:                                                       â”‚
â”‚  â€¢ Multiple students can submit to same assignment                  â”‚
â”‚  â€¢ Each submission has ONE FileURL (student's uploaded file)         â”‚
â”‚  â€¢ MarksObtained & Feedback are NULL until teacher grades           â”‚
â”‚  â€¢ SubmittedAt auto-set to current timestamp on insertion           â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CODE EXECUTION FLOW                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  SCENARIO: Student Submits Assignment (First Time)                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  POST /api/courses/5/assignments/3/submit                            â”‚
â”‚  Body: { fileURL: "https://storage.com/file.pdf" }                   â”‚
â”‚     â”‚                                                               â”‚
â”‚     â”œâ”€ assignments.controller.js submitAssignment() [Line 162]       â”‚
â”‚     â”‚  â”œâ”€ const studentId = req.user.id (from JWT: 7)               â”‚
â”‚     â”‚  â”œâ”€ const assignmentId = 3                                    â”‚
â”‚     â”‚  â”‚                                                            â”‚
â”‚     â”‚  â””â”€ SELECT FROM AssignmentSubmission                          â”‚
â”‚     â”‚     WHERE AssignmentID = 3 AND StudentID = 7                  â”‚
â”‚     â”‚     Result: [] (empty, first submission)                      â”‚
â”‚     â”‚     â”‚                                                         â”‚
â”‚     â”‚     â””â”€ INSERT INTO AssignmentSubmission                       â”‚
â”‚     â”‚        (AssignmentID, StudentID, FileURL)                     â”‚
â”‚     â”‚        VALUES (3, 7, "https://...")                           â”‚
â”‚     â”‚        â”‚                                                      â”‚
â”‚     â”‚        â””â”€ Database State AFTER:                               â”‚
â”‚     â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚     â”‚           â”‚ SubmissionID: 42                        â”‚         â”‚
â”‚     â”‚           â”‚ AssignmentID: 3                         â”‚         â”‚
â”‚     â”‚           â”‚ StudentID: 7                            â”‚         â”‚
â”‚     â”‚           â”‚ FileURL: "https://storage.com/file.pdf" â”‚         â”‚
â”‚     â”‚           â”‚ SubmittedAt: 2024-01-15 14:30:00       â”‚         â”‚
â”‚     â”‚           â”‚ MarksObtained: NULL                     â”‚         â”‚
â”‚     â”‚           â”‚ Feedback: NULL                          â”‚         â”‚
â”‚     â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚     â”‚                                                               â”‚
â”‚     â””â”€ Response: { SubmissionID: 42, message: "Submitted" }         â”‚
â”‚                                                                      â”‚
â”‚  SCENARIO: Student Resubmits Assignment (Second Submission)          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  POST /api/courses/5/assignments/3/submit (same student)             â”‚
â”‚  Body: { fileURL: "https://storage.com/file_v2.pdf" }               â”‚
â”‚     â”‚                                                               â”‚
â”‚     â”œâ”€ SELECT FROM AssignmentSubmission                             â”‚
â”‚     â”‚  WHERE AssignmentID = 3 AND StudentID = 7                     â”‚
â”‚     â”‚  Result: [{SubmissionID: 42, ...}] (FOUND!)                   â”‚
â”‚     â”‚     â”‚                                                         â”‚
â”‚     â”‚     â””â”€ UPDATE AssignmentSubmission                            â”‚
â”‚     â”‚        SET FileURL = "https://storage.com/file_v2.pdf"        â”‚
â”‚     â”‚        WHERE SubmissionID = 42                                â”‚
â”‚     â”‚        â”‚                                                      â”‚
â”‚     â”‚        â””â”€ Database State AFTER:                               â”‚
â”‚     â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚     â”‚           â”‚ SubmissionID: 42 (unchanged)            â”‚         â”‚
â”‚     â”‚           â”‚ FileURL: "https://.../file_v2.pdf" â—„â”€â”€  â”‚ Updated â”‚
â”‚     â”‚           â”‚ SubmittedAt: 2024-01-15 14:30:00 (old) â”‚         â”‚
â”‚     â”‚           â”‚ MarksObtained: NULL (still)             â”‚         â”‚
â”‚     â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚     â”‚                                                               â”‚
â”‚     â””â”€ Response: { SubmissionID: 42, message: "Updated" }           â”‚
â”‚                                                                      â”‚
â”‚  SCENARIO: Teacher Grades Submission                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  PUT /api/courses/5/assignments/submissions/42/grade                 â”‚
â”‚  Body: { MarksObtained: 8, Feedback: "Good work!" }                 â”‚
â”‚     â”‚                                                               â”‚
â”‚     â”œâ”€ assignments.controller.js gradeSubmission() [Line 204]       â”‚
â”‚     â”‚  â”œâ”€ Extract: submissionId = 42, MarksObtained = 8             â”‚
â”‚     â”‚  â”‚                                                            â”‚
â”‚     â”‚  â””â”€ UPDATE AssignmentSubmission                               â”‚
â”‚     â”‚     SET MarksObtained = 8,                                    â”‚
â”‚     â”‚         Feedback = "Good work!"                               â”‚
â”‚     â”‚     WHERE SubmissionID = 42                                   â”‚
â”‚     â”‚     â”‚                                                         â”‚
â”‚     â”‚     â””â”€ Database State AFTER:                                  â”‚
â”‚     â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚     â”‚        â”‚ SubmissionID: 42                        â”‚            â”‚
â”‚     â”‚        â”‚ StudentID: 7                            â”‚            â”‚
â”‚     â”‚        â”‚ FileURL: (unchanged)                    â”‚            â”‚
â”‚     â”‚        â”‚ MarksObtained: 8 â—„â”€â”€â”€â”€â”€â”€ Graded!        â”‚            â”‚
â”‚     â”‚        â”‚ Feedback: "Good work!" â—„â”€â”€ Feedback     â”‚            â”‚
â”‚     â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚     â”‚                                                               â”‚
â”‚     â””â”€ Response: { message: "Graded successfully" }                 â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ACTIVITY LOG & PROGRESS ARCHITECTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ACTIVITY LOG & PROGRESS TRACKING SYSTEM               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API ENDPOINTS                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  1. GET /api/courses/:courseId/progress                              â”‚
â”‚     â””â”€ sections.controller.js â†’ getStudentProgress()                 â”‚
â”‚        â”œâ”€ SELECT Section + JOIN Lesson                               â”‚
â”‚        â”œâ”€ COUNT(ActivityLog WHERE ActivityType='LessonView')         â”‚
â”‚        â”œâ”€ Calculate: Progress% = Viewed/Total Ã— 100                  â”‚
â”‚        â””â”€ Returns: Sections with progress percentages                â”‚
â”‚                                                                      â”‚
â”‚  2. POST /api/courses/:courseId/sections/:sectionId/complete         â”‚
â”‚     â””â”€ sections.controller.js â†’ markSectionComplete()                â”‚
â”‚        â”œâ”€ SELECT ALL Lessons in Section                              â”‚
â”‚        â”œâ”€ For each Lesson:                                           â”‚
â”‚        â”‚  â””â”€ INSERT INTO ActivityLog ('LessonView')                   â”‚
â”‚        â””â”€ Returns: { message: "Section complete" }                   â”‚
â”‚                                                                      â”‚
â”‚  3. GET /api/student/activity                                        â”‚
â”‚     â””â”€ student.controller.js â†’ getStudentActivity()                  â”‚
â”‚        â”œâ”€ SELECT FROM ActivityLog                                    â”‚
â”‚        â”œâ”€ ORDER BY ActivityDate DESC LIMIT 100                       â”‚
â”‚        â””â”€ Returns: Last 100 activities                               â”‚
â”‚                                                                      â”‚
â”‚  4. GET /api/student/dashboard                                       â”‚
â”‚     â””â”€ student.controller.js â†’ getStudentDashboard()                 â”‚
â”‚        â”œâ”€ COUNT(ActivityLog WHERE ActivityType='LessonView')         â”‚
â”‚        â”œâ”€ COUNT(QuizAttempt)                                         â”‚
â”‚        â”œâ”€ COUNT(AssignmentSubmission)                                â”‚
â”‚        â””â”€ Returns: Dashboard statistics                              â”‚
â”‚                                                                      â”‚
â”‚  5. GET /api/courses/:courseId/progress-details                      â”‚
â”‚     â””â”€ enrollment.controller.js â†’ getStudentProgressDetails()        â”‚
â”‚        â”œâ”€ SELECT FROM Enrollment                                     â”‚
â”‚        â”œâ”€ COUNT(ActivityLog) for total activities                    â”‚
â”‚        â”œâ”€ COUNT(Lesson) for total lessons                            â”‚
â”‚        â””â”€ Returns: Detailed progress breakdown                       â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATABASE RELATIONSHIPS                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Course       â”‚      â”‚ Section      â”‚      â”‚ Lesson       â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚ CourseID(PK) â”‚â”€â”€â”€â”€â”€â†’â”‚ CourseID(FK) â”‚â”€â”€â”€â”€â”€â†’â”‚ SectionID(FK)â”‚       â”‚
â”‚  â”‚ Title        â”‚      â”‚ SectionID(PK)â”‚      â”‚ LessonID(PK) â”‚       â”‚
â”‚  â”‚ TeacherID    â”‚      â”‚ Title        â”‚      â”‚ Title        â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ PositionOrderâ”‚      â”‚ ContentURL   â”‚       â”‚
â”‚         â–²              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                                           â–²                â”‚
â”‚         â”‚                                           â”‚ (When viewed)  â”‚
â”‚         â”‚                                           â”‚ Logs entry    â”‚
â”‚         â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚         â”‚                    â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â–¼                                       â”‚
â”‚  â”‚ Enrollment   â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚ ActivityLog          â”‚                     â”‚
â”‚  â”‚ EnrollmentID â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
â”‚  â”‚ StudentID(FK)â”‚â”€â”€â”€â”€â”€â†’â”‚ LogID (PK)           â”‚                     â”‚
â”‚  â”‚ CourseID(FK) â”‚      â”‚ StudentID (FK)  â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚  â”‚ ProgressPerc â”‚â—„â”€â”€â”€â”€â”€â”‚ ActivityDate         â”‚                     â”‚
â”‚  â”‚ Status       â”‚ Upd  â”‚ ActivityType         â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  ('LessonView',      â”‚                     â”‚
â”‚                        â”‚   'QuizAttempt',     â”‚                     â”‚
â”‚                        â”‚   'Submission',      â”‚                     â”‚
â”‚                        â”‚   'Login')           â”‚                     â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                      â”‚
â”‚  Key: Student â†’ Enrollment â†’ Course/Section/Lesson                  â”‚
â”‚       When Lesson viewed â†’ Log in ActivityLog                        â”‚
â”‚       Count views â†’ Calculate progress â†’ Update Enrollment           â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CODE EXECUTION FLOW                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  SCENARIO: Student Completes Section                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  POST /api/courses/5/sections/2/complete                             â”‚
â”‚     â”‚                                                               â”‚
â”‚     â”œâ”€ sections.controller.js markSectionComplete() [Line 277]      â”‚
â”‚     â”‚  â”œâ”€ studentId = 7 (from JWT)                                  â”‚
â”‚     â”‚  â”œâ”€ sectionId = 2                                             â”‚
â”‚     â”‚  â”‚                                                            â”‚
â”‚     â”‚  â”œâ”€ SELECT LessonID FROM Lesson WHERE SectionID = 2           â”‚
â”‚     â”‚  â”‚  Result: [                                                 â”‚
â”‚     â”‚  â”‚    {LessonID: 10},                                         â”‚
â”‚     â”‚  â”‚    {LessonID: 11},                                         â”‚
â”‚     â”‚  â”‚    {LessonID: 12}                                          â”‚
â”‚     â”‚  â”‚  ]                                                         â”‚
â”‚     â”‚  â”‚                                                            â”‚
â”‚     â”‚  â””â”€ For each lesson: INSERT INTO ActivityLog                  â”‚
â”‚     â”‚     Iteration 1: INSERT INTO ActivityLog (7, TODAY(), 'LV')   â”‚
â”‚     â”‚     Iteration 2: INSERT INTO ActivityLog (7, TODAY(), 'LV')   â”‚
â”‚     â”‚     Iteration 3: INSERT INTO ActivityLog (7, TODAY(), 'LV')   â”‚
â”‚     â”‚                                                               â”‚
â”‚     â”‚     Database State AFTER:                                     â”‚
â”‚     â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚     â”‚     â”‚ LogID | StudentID | ActivityDate | Type    â”‚            â”‚
â”‚     â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
â”‚     â”‚     â”‚ 501  â”‚ 7         â”‚ 2024-01-15  | LessonViewâ”‚            â”‚
â”‚     â”‚     â”‚ 502  â”‚ 7         â”‚ 2024-01-15  | LessonViewâ”‚            â”‚
â”‚     â”‚     â”‚ 503  â”‚ 7         â”‚ 2024-01-15  | LessonViewâ”‚            â”‚
â”‚     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚     â”‚                                                               â”‚
â”‚     â””â”€ Response: { message: "Section marked complete" }             â”‚
â”‚                                                                      â”‚
â”‚  SCENARIO: Get Course Progress                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  GET /api/courses/5/progress                                        â”‚
â”‚     â”‚                                                               â”‚
â”‚     â”œâ”€ sections.controller.js getStudentProgress() [Line 225]       â”‚
â”‚     â”‚  â”œâ”€ studentId = 7                                             â”‚
â”‚     â”‚  â”œâ”€ courseId = 5                                              â”‚
â”‚     â”‚  â”‚                                                            â”‚
â”‚     â”‚  â”œâ”€ SELECT s.*, COUNT(l.LessonID) as TotalLessons,            â”‚
â”‚     â”‚  â”‚         (SELECT COUNT(*) FROM ActivityLog                  â”‚
â”‚     â”‚  â”‚          WHERE StudentID = 7                               â”‚
â”‚     â”‚  â”‚          AND ActivityType = 'LessonView'                   â”‚
â”‚     â”‚  â”‚          AND ... in this section)                          â”‚
â”‚     â”‚  â”‚         as CompletedLessons                                â”‚
â”‚     â”‚  â”‚ FROM Section s LEFT JOIN Lesson l                          â”‚
â”‚     â”‚  â”‚ WHERE s.CourseID = 5                                       â”‚
â”‚     â”‚  â”‚                                                            â”‚
â”‚     â”‚  â”‚ Result: [                                                  â”‚
â”‚     â”‚  â”‚   {                                                        â”‚
â”‚     â”‚  â”‚     SectionID: 1,                                          â”‚
â”‚     â”‚  â”‚     Title: "Introduction",                                 â”‚
â”‚     â”‚  â”‚     TotalLessons: 3,                                       â”‚
â”‚     â”‚  â”‚     CompletedLessons: 3,                                   â”‚
â”‚     â”‚  â”‚     ProgressPercentage: 100%  â—„â”€â”€ (3/3 Ã— 100)              â”‚
â”‚     â”‚  â”‚   },                                                       â”‚
â”‚     â”‚  â”‚   {                                                        â”‚
â”‚     â”‚  â”‚     SectionID: 2,                                          â”‚
â”‚     â”‚  â”‚     Title: "Advanced Topics",                              â”‚
â”‚     â”‚  â”‚     TotalLessons: 5,                                       â”‚
â”‚     â”‚  â”‚     CompletedLessons: 2,                                   â”‚
â”‚     â”‚  â”‚     ProgressPercentage: 40%   â—„â”€â”€ (2/5 Ã— 100)              â”‚
â”‚     â”‚  â”‚   }                                                        â”‚
â”‚     â”‚  â”‚ ]                                                          â”‚
â”‚     â”‚                                                               â”‚
â”‚     â””â”€ Response: [...sections with progress...]                     â”‚
â”‚                                                                      â”‚
â”‚  SCENARIO: Get Student Activity History                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  GET /api/student/activity                                          â”‚
â”‚     â”‚                                                               â”‚
â”‚     â”œâ”€ student.controller.js getStudentActivity() [Line 99]         â”‚
â”‚     â”‚  â”œâ”€ studentId = 7                                             â”‚
â”‚     â”‚  â”‚                                                            â”‚
â”‚     â”‚  â”œâ”€ SELECT LogID, ActivityType, ActivityDate                  â”‚
â”‚     â”‚  â”‚ FROM ActivityLog                                           â”‚
â”‚     â”‚  â”‚ WHERE StudentID = 7                                        â”‚
â”‚     â”‚  â”‚ ORDER BY ActivityDate DESC LIMIT 100                       â”‚
â”‚     â”‚  â”‚                                                            â”‚
â”‚     â”‚  â”‚ Result (Latest 5):                                         â”‚
â”‚     â”‚  â”‚ [                                                          â”‚
â”‚     â”‚  â”‚   {LogID: 503, ActivityType: 'LessonView', Date: 2024-01-15}, â”‚
â”‚     â”‚  â”‚   {LogID: 502, ActivityType: 'LessonView', Date: 2024-01-15},  â”‚
â”‚     â”‚  â”‚   {LogID: 501, ActivityType: 'LessonView', Date: 2024-01-15},  â”‚
â”‚     â”‚  â”‚   {LogID: 500, ActivityType: 'QuizAttempt', Date: 2024-01-14}, â”‚
â”‚     â”‚  â”‚   {LogID: 499, ActivityType: 'Login', Date: 2024-01-14}        â”‚
â”‚     â”‚  â”‚ ]                                                          â”‚
â”‚     â”‚                                                               â”‚
â”‚     â””â”€ Response: [activity entries...]                              â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. COMPLETE SYSTEM INTEGRATION MAP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          LMS COMPLETE FEATURE MAP                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              STUDENT DASHBOARD
                                      â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                       â”‚                       â”‚
                â–¼                       â–¼                       â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Quiz System  â”‚      â”‚ Assignments  â”‚      â”‚ Progress Tracker â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                       â”‚                       â”‚
                â”‚                       â”‚                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
         â”‚           â”‚         â”‚                â”‚      â”‚             â”‚
    Question    QuizAttempt  FileURL    MarksObtained  ActivityLog   Enrollment
     Table       Table       Upload     + Feedback     Table         Table
    (store Q)   (auto-score) (upload)   (grade)       (track views)  (track %age)
         â”‚           â”‚         â”‚           â”‚              â”‚            â”‚
         â”‚           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚           â”‚         â”‚           â”‚              â”‚            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                         UNIQUE STUDENT IDENTIFIER
                              (StudentID)


FEATURE INTEGRATION SUMMARY:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. QUIZ QUESTIONS
   â”œâ”€ Store: Question table
   â”œâ”€ Query: quiz.controller.js getQuizById() [Line 32]
   â”œâ”€ Score: Automatic comparison in submitQuizAttempt() [Line 139]
   â””â”€ Track: QuizAttempt table stores scores

2. ASSIGNMENT SUBMISSIONS
   â”œâ”€ Store: AssignmentSubmission table
   â”œâ”€ Submit: assignments.controller.js submitAssignment() [Line 162]
   â”œâ”€ Grade: gradeSubmission() [Line 204] (MarksObtained + Feedback)
   â””â”€ Track: Multiple attempts per student per assignment

3. ACTIVITY LOG
   â”œâ”€ Store: ActivityLog table
   â”œâ”€ Log: markSectionComplete() [Line 277] logs lesson views
   â”œâ”€ Query: getStudentProgress() [Line 225] counts views
   â”œâ”€ Calculate: Progress% = (CompletedLessons / TotalLessons) Ã— 100
   â””â”€ Track: Last 100 activities via getStudentActivity() [Line 99]
```

---

## 5. REQUEST-RESPONSE CYCLE DIAGRAMS

### Quiz Submission Flow
```
Client                          Server                        Database
   â”‚                               â”‚                              â”‚
   â”œâ”€â”€POST /quizzes/5/submitâ”€â”€â”€â”€â”€â”€â†’â”‚                              â”‚
   â”‚   { answers: {                â”‚                              â”‚
   â”‚     Q1: 'B',                  â”‚ SELECT Question              â”‚
   â”‚     Q2: 'A'                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚   }                           â”‚      WHERE QuizID = 5        â”‚
   â”‚                               â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                               â”‚   [Q1: CorrectOpt='B'...]    â”‚
   â”‚                               â”‚                              â”‚
   â”‚                               â”‚ Score Calculation:           â”‚
   â”‚                               â”‚ if 'B' === 'B' â†’ +1 mark     â”‚
   â”‚                               â”‚ if 'A' === 'D' â†’ +0 marks    â”‚
   â”‚                               â”‚ Total: 1 mark                â”‚
   â”‚                               â”‚                              â”‚
   â”‚                               â”‚ INSERT INTO QuizAttempt      â”‚
   â”‚                               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚                               â”‚   (QuizID, StudentID, Score) â”‚
   â”‚â†â”€â”€{ AttemptID: 42, Sc: 1 }â”€â”€â”€â”¤â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                               â”‚
```

### Assignment Submission Flow
```
Client                    Server                        Database
   â”‚                          â”‚                             â”‚
   â”œâ”€POST /submit (file)â”€â”€â”€â”€â”€â”€â†’â”‚                             â”‚
   â”‚                           â”‚ CHECK: SELECT EXISTS        â”‚
   â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚                           â”‚  (Already submitted?)       â”‚
   â”‚                           â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                           â”‚     Result: No              â”‚
   â”‚                           â”‚                             â”‚
   â”‚                           â”‚ INSERT INTO                 â”‚
   â”‚                           â”‚ AssignmentSubmission        â”‚
   â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚                           â”‚  (FileURL, StudentID, etc)  â”‚
   â”‚                           â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚â†â”€â”€{ SubmissionID: 42 }â”€â”€â”€â”€â”¤                             â”‚
   â”‚
   â”‚
   â”‚ [Teacher later...]
   â”‚
   â”‚                           â”‚ UPDATE SET MarksObtained    â”‚
   â”œâ”€PUT /grade (marks)â”€â”€â”€â”€â”€â”€â”€â†’â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚  {MarksObtained: 8,       â”‚ â”‚  WHERE SubmissionID = 42    â”‚
   â”‚   Feedback: "Good!"}      â”‚ â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                           â”‚ â”‚ Updated 1 row               â”‚
   â”‚â†â”€â”€{ message: "Graded" }â”€â”€â”€â”¤                             â”‚
```

### Progress Calculation Flow
```
Client              Server                      Database
   â”‚                   â”‚                            â”‚
   â”œâ”€GET /progressâ”€â”€â”€â”€â†’â”‚ SELECT Section             â”‚
   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚                   â”‚ SELECT COUNT FROM          â”‚
   â”‚                   â”‚ ActivityLog WHERE          â”‚
   â”‚                   â”‚ StudentID=7, Type='LView'  â”‚
   â”‚                   â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                   â”‚  Count: 3                  â”‚
   â”‚                   â”‚                            â”‚
   â”‚                   â”‚ COUNT Lessons Total: 5     â”‚
   â”‚                   â”‚                            â”‚
   â”‚                   â”‚ Calculate:                 â”‚
   â”‚                   â”‚ 3 / 5 Ã— 100 = 60%          â”‚
   â”‚                   â”‚                            â”‚
   â”‚â†â”€{ Progress: 60% }â”¤                            â”‚
```

---

## 6. Integration Status Checklist

```
âœ… QUESTIONS & QUIZ QUESTIONS
   â”œâ”€ âœ… Table Created (Question table)
   â”œâ”€ âœ… Stored in Quiz (via quiz.controller.js)
   â”œâ”€ âœ… Retrieved with Options (getQuizById)
   â”œâ”€ âœ… Auto-Scoring (submitQuizAttempt)
   â”œâ”€ âœ… Cascade Delete (deleteQuiz)
   â””â”€ âœ… API Endpoints (4 endpoints)

âœ… ASSIGNMENT SUBMISSIONS
   â”œâ”€ âœ… Table Created (AssignmentSubmission table)
   â”œâ”€ âœ… File Upload Support (FileURL column)
   â”œâ”€ âœ… Multiple Attempt Handling (UPDATE or INSERT)
   â”œâ”€ âœ… Grading System (MarksObtained + Feedback)
   â”œâ”€ âœ… Statistics (AVG, MAX, MIN, COUNT)
   â””â”€ âœ… API Endpoints (6 endpoints)

âœ… ACTIVITY LOG & PROGRESS
   â”œâ”€ âœ… Table Created (ActivityLog table)
   â”œâ”€ âœ… Activity Types (Login, LessonView, QuizAttempt, Submission)
   â”œâ”€ âœ… Activity Logging (markSectionComplete logs views)
   â”œâ”€ âœ… Progress Calculation (COUNT views / total lessons)
   â”œâ”€ âœ… History Retrieval (Last 100 activities)
   â”œâ”€ âœ… Progress Updates (Enrollment.ProgressPercentage)
   â””â”€ âœ… API Endpoints (5 endpoints)

ğŸŸ¢ PRODUCTION READY - ALL FEATURES INTEGRATED
```

---

Generated: 2024 | LMS Backend Integration Complete
